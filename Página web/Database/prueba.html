<?
session_start();
?>
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Pie Chart</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
        $(document).ready(function() {
            var options = {
                chart: {
                    renderTo: 'container',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'Octopus Temperature'
                },
                yAxis: {
            title: {
                text: 'Temperature (째C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            valueSuffix: '째C'
        },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            formatter: function() {
                                return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                            }
                        }
                    }
                },
                series: [
                        {
                            name: 'val1',
                            data: []
                        }, {
                            name: 'val2',
                            data: []
                }
                    
                ]
            };

            var options2 = {
                chart: {
                    renderTo: 'container2',
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: 'Octopus Temperature'
                },
                yAxis: {
            title: {
                text: 'Temperature (째C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            valueSuffix: '째C'
        },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            color: '#000000',
                            connectorColor: '#000000',
                            formatter: function() {
                                return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                            }
                        }
                    }
                },
                series: [
                        {
                            name: 'val1',
                            data: []
                        }, {
                            name: 'val2',
                            data: []
                }
                    
                ]
            };
           

        // The value of the variable name is found
         var user = getParameter('user');
         console.log(user);


        
        
        $.getJSON("data.php", function(json) {
            options.series[0].data = json;
            chart = new Highcharts.Chart(options);
        });
        
        $.getJSON("data2.php", function(json) {
                options2.series[0].data = json;
                chart = new Highcharts.Chart(options2);
            });   

           
           
        });
          function getParameter(theParameter) { 
  var params = window.location.search.substr(1).split('&');
 
  for (var i = 0; i < params.length; i++) {
    var p=params[i].split('=');
    if (p[0] == theParameter) {
      return decodeURIComponent(p[1]);
    }
  }
  return false;
}   
        </script>
        <script src="http://code.highcharts.com/highcharts.js"></script>
        <script src="http://code.highcharts.com/modules/exporting.js"></script>
    </head>
    <body>
       
        <?php echo '<h1>' . $_SESSION["usuario_online"] . '</h1>'; ?>
        <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
        <div id="container2" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
    </body>
</html>